(()=>{"use strict";var e={180:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},4:(e,t,r)=>{e.exports=r.p+"images/rs_school_js..svg"}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&!e;)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=document.baseURI||self.location.href,(()=>{var e,t=r(180),o=r.n(t),n=new URL(r(4),r.b);o()(n),function(e){e[e.Unauthorized=401]="Unauthorized",e[e.NotFound=404]="NotFound"}(e||(e={}));var s=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function c(e){try{a(o.next(e))}catch(e){s(e)}}function i(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,i)}a((o=o.apply(e,t||[])).next())}))};const c=class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(t){return s(this,void 0,void 0,(function*(){if(!t.ok)throw t.status!==e.NotFound&&t.status!==e.Unauthorized||console.log(`Sorry, but there is ${t.status} error: ${t.statusText}`),Error(t.statusText);return yield t.json()}))}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),e);let o=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{o+=`${e}=${r[e]}&`})),o.slice(0,-1)}load(e,t,r,o={}){return s(this,void 0,void 0,(function*(){try{const n=yield fetch(this.makeUrl(o,t),{method:e}),s=yield this.errorHandler(n);r(s)}catch(e){console.error(e)}}))}},i=class extends c{constructor(){super("https://newsapi.org/v2/",{apiKey:"c1efc4970c904df0878526a0c7f00938"})}},a=class extends i{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let r=e.target;const o=e.currentTarget;for(;r!==o;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&(e&&o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e||""}},t)))}r=r.parentNode}}},u=class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");o&&t.forEach(((e,t)=>{const n=o.content.cloneNode(!0),s=n.querySelector(".news__item");t%2&&s&&s.classList.add("alt");const c=n.querySelector(".news__meta-photo");c&&(c.style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`);const i=n.querySelector(".news__meta-author");i&&(i.textContent=e.author||e.source.name);const a=n.querySelector(".news__meta-date");a&&(a.textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"));const u=n.querySelector(".news__description-title");u&&(u.textContent=e.title);const l=n.querySelector(".news__description-source");l&&(l.textContent=e.source.name);const d=n.querySelector(".news__description-content");d&&(d.textContent=e.description);const p=n.querySelector(".news__read-more a");p&&p.setAttribute("href",e.url),r.append(n)}));const n=document.querySelector(".news");n&&(n.innerHTML="",n.appendChild(r))}},l=class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");if(r){e.forEach((e=>{const o=r.content.cloneNode(!0),n=o.querySelector(".source__item-name");n&&(n.textContent=e.name);const s=o.querySelector(".source__item");s&&s.setAttribute("data-source-id",e.id),t.append(o)}));const o=document.querySelector(".sources");o&&o.append(t)}}};class d{constructor(){this.news=new u,this.sources=new l}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}}(new class{constructor(){this.controller=new a,this.view=new d}start(){const e=document.querySelector(".sources");e&&e.addEventListener("click",(e=>{this.controller.getNews(e,(e=>{e&&this.view.drawNews(e)}))})),this.controller.getSources((e=>{if(e){const t=e;this.view.drawSources(t)}}))}}).start()})()})();