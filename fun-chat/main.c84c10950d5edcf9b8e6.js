(()=>{"use strict";var e,s,t={385:e=>{e.exports=function(e,s){return s||(s={}),e?(e=String(e.__esModule?e.default:e),s.hash&&(e+=s.hash),s.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},226:(e,s,t)=>{t.d(s,{Y:()=>r});class r{constructor(e){this.element=document.createElement(e.tag),e.classNames&&this.setCssSelector(e.classNames),e.textContent&&this.setTextContent(e.textContent),e.callback&&this.setCallback(e.callback)}getElement(){return this.element}addInnerElement(e){e instanceof r?this.element.append(e.getElement()):this.element.append(e)}setCssSelector(e){e.forEach((e=>{this.element.classList.add(e)}))}setTextContent(e){this.element.textContent=e}setCallback(e){this.element.addEventListener("click",e)}}},624:(e,s,t)=>{t.d(s,{d:()=>r});class r{static saveUserData({id:e,login:s,password:t}){const r={id:e,login:s,password:t},a=JSON.stringify(r);sessionStorage.setItem("userData",a)}static getUserData(){const e=sessionStorage.getItem("userData");return e?JSON.parse(e):null}static removeUserData(){sessionStorage.removeItem("userData")}static generateRequestId(){let e="";for(let s=0;s<10;s+=1)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}}},766:(e,s,t)=>{t.d(s,{S:()=>a});var r=t(226);class a{constructor(e){this.viewHtmlElement=this.createElement(e)}createElement(e){return new r.Y(e)}getElement(){return this.viewHtmlElement.getElement()}addInnerElement(e){this.viewHtmlElement.addInnerElement(e)}render(e){console.log(e)}}},249:(e,s,t)=>{e.exports=t.p+"images/apple-touch-icon..png"},912:(e,s,t)=>{e.exports=t.p+"images/favicon-16x16..png"},780:(e,s,t)=>{e.exports=t.p+"images/favicon-32x32..png"}},r={};function a(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,a.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return a.d(s,{a:s}),s},a.d=(e,s)=>{for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((s,t)=>(a.f[t](e,s),s)),[])),a.u=e=>e+"."+{424:"909bfe5b3093e2c80f0b",920:"0ce57c25927bcad1ea95",962:"4b4887876fa9372c2c0e",988:"92f6600ef0345d9f3cfd"}[e]+".js",a.miniCssF=e=>"css/"+e+"."+{424:"dca64c3e",920:"01393c87",962:"c6b09662",988:"6521a4df"}[e]+".css",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),e={},s="fun-chat:",a.l=(t,r,i,n)=>{if(e[t])e[t].push(r);else{var o,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),h=0;h<d.length;h++){var c=d[h];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")==s+i){o=c;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",s+i),o.src=t),e[t]=[r];var u=(s,r)=>{o.onerror=o.onload=null,clearTimeout(g);var a=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(r))),s)return s(r)},g=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var s=a.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var t=s.getElementsByTagName("script");if(t.length)for(var r=t.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=t[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{if("undefined"!=typeof document){var e={792:0};a.f.miniCss=(s,t)=>{e[s]?t.push(e[s]):0!==e[s]&&{424:1,920:1,962:1,988:1}[s]&&t.push(e[s]=(e=>new Promise(((s,t)=>{var r=a.miniCssF(e),i=a.p+r;if(((e,s)=>{for(var t=document.getElementsByTagName("link"),r=0;r<t.length;r++){var a=(n=t[r]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===e||a===s))return n}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var n;if((a=(n=i[r]).getAttribute("data-href"))===e||a===s)return n}})(r,i))return s();((e,s,t,r,i)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc),n.onerror=n.onload=t=>{if(n.onerror=n.onload=null,"load"===t.type)r();else{var a=t&&t.type,o=t&&t.target&&t.target.href||s,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+o+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=o,n.parentNode&&n.parentNode.removeChild(n),i(l)}},n.href=s,document.head.appendChild(n)})(e,i,0,s,t)})))(s).then((()=>{e[s]=0}),(t=>{throw delete e[s],t})))}}})(),(()=>{a.b=document.baseURI||self.location.href;var e={792:0};a.f.j=(s,t)=>{var r=a.o(e,s)?e[s]:void 0;if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(((t,a)=>r=e[s]=[t,a]));t.push(r[2]=i);var n=a.p+a.u(s),o=new Error;a.l(n,(t=>{if(a.o(e,s)&&(0!==(r=e[s])&&(e[s]=void 0),r)){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;o.message="Loading chunk "+s+" failed.\n("+i+": "+n+")",o.name="ChunkLoadError",o.type=i,o.request=n,r[1](o)}}),"chunk-"+s,s)}};var s=(s,t)=>{var r,i,[n,o,l]=t,d=0;if(n.some((s=>0!==e[s]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);l&&l(a)}for(s&&s(t);d<n.length;d++)i=n[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},t=self.webpackChunkfun_chat=self.webpackChunkfun_chat||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})(),(()=>{var e=a(385),s=a.n(e),t=new URL(a(249),a.b),r=new URL(a(780),a.b),i=new URL(a(912),a.b);s()(t),s()(r),s()(i);var n=a(624);class o{constructor(e){this.router=e,this.handleHashChange=this.handleHashChange.bind(this),this.clearHash(),this.setupEventListener(),this.handleHashChange()}clearHash(){window.location.hash=""}updateHashUrl(e){window.location.hash=e}getHashUrl(){const{hash:e}=window.location;return e.slice(1)}handleHashChange(){const e=n.d.getUserData();if(!this.getHashUrl())return e?void this.updateHashUrl("chat"):void this.updateHashUrl("login");if(!e&&"chat"===this.getHashUrl())return void this.updateHashUrl("login");const s=this.router.findRoute(this.getHashUrl());if(s){if(e&&"login"===this.getHashUrl())return void this.updateHashUrl("chat");s.callback()}else this.updateHashUrl("not-found")}setupEventListener(){window.addEventListener("hashchange",this.handleHashChange)}}class l{constructor({path:e,callback:s}){this.path=e,this.callback=s}}class d{constructor(e){this.routes=[],this.addRoute(e),this.hashRouter=new o(this)}addRoute(e){e.forEach((e=>this.routes.push(new l(e))))}findRoute(e){return this.routes.find((s=>s.path===e))}showNotFoundPage(){var e;null===(e=this.findRoute("not-found"))||void 0===e||e.callback()}updateContentForCurrentRoute(){var e;const s=this.hashRouter.getHashUrl(),t=null===(e=this.findRoute(s))||void 0===e?void 0:e.callback;t&&t()}navigate(e){this.findRoute(e)?this.hashRouter.updateHashUrl(e):this.showNotFoundPage()}}class h{constructor(){this.user=null,this.usersActive=[],this.usersInActive=[],this.allUsers=[],this.selectedUserMessages=new Map,this.userObservers=new Map,this.messageObservers=new Map;const e=n.d.getUserData();e&&(this.user=Object.assign(Object.assign({},e),{isLogined:!0}))}clearSelectedUserMessages(){this.selectedUserMessages=new Map}registerUserObserver(e,s){this.userObservers.set(e,s)}removeUserObserver(e){this.userObservers.delete(e)}notifyUserObservers(e){this.userObservers.forEach((s=>s.updateUsers(e)))}registerMessageObserver(e,s){this.messageObservers.set(e,s)}removeMessageObserver(e){this.messageObservers.delete(e)}notifyMessageObservers(e,s){this.messageObservers.forEach((t=>t.initialMessages(e,s)))}notifyNewMessageObservers(e){this.messageObservers.forEach((s=>s.updateMessages(e.slice(-1))))}addUserToAllUsers(e){this.changeStatusUser(e)||this.allUsers.push(e),this.notifyUserObservers(e)}changeStatusUserFromAllUsers(e){this.changeStatusUser(e),this.notifyUserObservers(e)}setAllUsers(e){const s=[...e];s.sort(((e,s)=>e.isLogined===s.isLogined?0:e.isLogined?-1:1)),this.allUsers=[...s]}updateStatusMessage(e){this.selectedUserMessages.forEach(((s,t)=>{const r=s.map((s=>{if(s.id===e.id){const t=Object.assign(Object.assign({},s.status),{isDelivered:e.status.isDelivered});return Object.assign(Object.assign({},s),{status:t})}return s}));this.selectedUserMessages.set(t,r)}))}updateReadStatusMessage(e){this.selectedUserMessages.forEach(((s,t)=>{const r=s.map((s=>{if(s.id===e.id){const t=Object.assign(Object.assign({},s.status),{isReaded:e.status.isReaded});return Object.assign(Object.assign({},s),{status:t})}return s}));this.selectedUserMessages.set(t,r)}))}removeMessageById(e){this.selectedUserMessages.forEach(((s,t)=>{const r=s.filter((s=>s.id!==e));this.selectedUserMessages.set(t,r)}))}editMessageById(e){this.selectedUserMessages.forEach(((s,t)=>{const r=s.map((s=>{var t;if(s.id===e.id){const r=Object.assign(Object.assign({},s.status),{isEdited:(null===(t=e.status)||void 0===t?void 0:t.isEdited)||!1});return Object.assign(Object.assign({},s),{text:e.text,status:r})}return s}));this.selectedUserMessages.set(t,r)}))}addMessageToSelectedUserMessages(e){const s=e.from,t=this.selectedUserMessages.get(s)||[];t.some((s=>s.id===e.id))||(t.push(e),this.selectedUserMessages.set(s,t),this.notifyNewMessageObservers(t))}getMessages(){return this.selectedUserMessages}setMessages(e,s,t){this.selectedUserMessages.has(s)||this.selectedUserMessages.set(s,[]);const r=this.selectedUserMessages.get(s)||[],a=e.filter((e=>!r.some((s=>s.id===e.id)))),i=[...r,...a];i.sort(((e,s)=>e.datetime-s.datetime)),this.selectedUserMessages.set(s,i);const n=this.findUserIndex(s),o=this.allUsers[n];t&&this.notifyMessageObservers(i,o)}getAllUsers(){return this.allUsers}setUsersActive(e){this.usersActive=e}getUsersActive(){return this.usersActive}setUsersInActive(e){this.usersInActive=e}getUsersInActive(){return this.usersInActive}setUser(e){this.user=e}getUser(){return this.user||null}changeStatusUser(e){const s=this.findUserIndex(e.login);return-1!==s&&(this.allUsers[s].isLogined=e.isLogined,!0)}findUserIndex(e){return this.allUsers.findIndex((s=>s.login===e))}}var c=a(766);class u extends c.S{constructor(){super({tag:"main",classNames:["main"]})}updateRender(e){this.getElement().innerHTML="",this.getElement().append(e.getElement())}}class g{constructor(e,s,t){this.errorAuth=null,this.webSocketService=e,this.router=s,this.state=t}getState(){return this.state}login(e,s,t,r){this.errorAuth=r||null;const a={id:e,type:"USER_LOGIN",payload:{user:{login:s,password:t}}};this.state.setUser({id:e,login:s,password:t,isLogined:!1}),this.webSocketService.sendRequest(a,this)}handleUserLogin(e){const{isLogined:s}=e.payload.user,t=this.state.getUser();if(t){this.state.setUser(Object.assign(Object.assign({},t),{isLogined:s})),this.router.navigate("chat");const{id:e,login:r,password:a}=t;this.saveUserDataToLocalStorage({id:e,login:r,password:a})}}handleUserExternal(e){this.state.addUserToAllUsers(e)}handleErrorMessage(e){var s;if(e.payload&&"error"in e.payload){const t=e.payload.error;null===(s=this.errorAuth)||void 0===s||s.showMessage(t),n.d.removeUserData()}}saveUserDataToLocalStorage({id:e,login:s,password:t}){n.d.saveUserData({id:e,login:s,password:t})}}class p{constructor(e,s,t){this.webSocketService=e,this.router=s,this.state=t}logout(){const e=this.state.getUser();if(e){const s={id:e.id,type:"USER_LOGOUT",payload:{user:{login:e.login,password:e.password}}};this.webSocketService.sendRequest(s,this)}}handleUserLogout(){n.d.removeUserData(),this.state.setUser(null),this.router.navigate("login")}handleUserExternalLogout(e){this.state.changeStatusUserFromAllUsers(e)}handleErrorMessage(e){if(e.payload&&"error"in e.payload){const s=e.payload.error;console.error(s)}}}class v{constructor(e,s,t){this.selectedUserName=[],this.statusObservers=new Map,this.shouldNotifyObservers=!1,this.webSocketService=e,this.router=s,this.state=t}setCallbackUpdateReadStatusMsg(e){this.updateReadStatusMsg=e}setCallbackDeleteMessage(e){this.deleteMessage=e}setCallbackEditMessage(e){this.editMessage=e}registerStatusObserver(e,s){this.statusObservers.set(e,s)}removeStatusObserver(e){this.statusObservers.delete(e)}notifyStatusObservers(e){this.statusObservers.forEach((s=>s.updateStatus(e)))}sendRequestToReceiveMessages(e,s){const t={id:n.d.generateRequestId(),type:"MSG_SEND",payload:{message:{to:e,text:s}}};this.webSocketService.sendRequest(t,this)}handleResponseWithReceivedMessages(e){this.state.addMessageToSelectedUserMessages(e)}sendRequestHistoryMessages(e,s,t){this.shouldNotifyObservers=s,this.updateCounter=t,this.selectedUserName.push(e);const r={id:n.d.generateRequestId(),type:"MSG_FROM_USER",payload:{user:{login:e}}};this.webSocketService.sendRequest(r,this)}handleResponseHistoryMessages(e){var s;const t=this.selectedUserName.shift();t&&this.state.setMessages(e,t,this.shouldNotifyObservers),null===(s=this.updateCounter)||void 0===s||s.call(this)}handleResponseDeliveryStatusChange(e){this.state.updateStatusMessage(e),this.notifyStatusObservers(e)}sendRequestReadMessage(e,s){this.updateReadStatusMsg=s;const t={id:n.d.generateRequestId(),type:"MSG_READ",payload:{message:{id:e}}};this.webSocketService.sendRequest(t,this)}handleResponseReadStatusChange(e){var s;this.state.updateReadStatusMessage(e),null===(s=this.updateReadStatusMsg)||void 0===s||s.call(this,e)}sendRequestDeleteMessage(e,s){this.deleteMessage=s;const t={id:n.d.generateRequestId(),type:"MSG_DELETE",payload:{message:{id:e}}};this.webSocketService.sendRequest(t,this)}handleResponseDeleteMessage(e){var s;this.state.removeMessageById(e.id),null===(s=this.deleteMessage)||void 0===s||s.call(this,e)}sendRequestEditMessage(e,s,t){this.editMessage=t;const r={id:n.d.generateRequestId(),type:"MSG_EDIT",payload:{message:{id:e,text:s}}};this.webSocketService.sendRequest(r,this)}handleResponseEditMessage(e){var s;this.state.editMessageById(e),null===(s=this.editMessage)||void 0===s||s.call(this,e)}handleErrorMessage(e){if(e.payload&&"error"in e.payload){const s=e.payload.error;console.error(s),this.router.navigate("login")}}}class S{constructor(e,s,t){this.webSocketService=e,this.router=s,this.state=t}fetchAllUsers(e,s){this.updateUserList=e,this.secondUpdateUserList=s,this.sendRequest()}sendRequest(){const e={id:n.d.generateRequestId(),type:"USER_ACTIVE",payload:null},s={id:n.d.generateRequestId(),type:"USER_INACTIVE",payload:null};this.webSocketService.sendRequest(e,this),this.webSocketService.sendRequest(s,this)}handleUsers(e){var s,t;if("USER_ACTIVE"===e.type){const s=e.payload?e.payload.users:[];return void this.state.setUsersActive(s)}if("USER_INACTIVE"===e.type){const s=e.payload?e.payload.users:[];this.state.setUsersInActive(s)}const r=n.d.getUserData(),a=[...this.state.getUsersActive(),...this.state.getUsersInActive()].filter((e=>e.login!==(null==r?void 0:r.login)));this.state.setAllUsers(a),null===(s=this.updateUserList)||void 0===s||s.call(this,this.state.getAllUsers()),null===(t=this.secondUpdateUserList)||void 0===t||t.call(this)}handleErrorMessage(e){if(e.payload&&"error"in e.payload){const s=e.payload.error;console.error(s)}}}class f{constructor(e,s,t){this.webSocketService=e,this.router=s,this.state=t,this.logoutService=new p(this.webSocketService,this.router,this.state),this.userService=new S(this.webSocketService,this.router,this.state),this.messageReceiveService=new v(this.webSocketService,this.router,this.state)}getLogoutService(){return this.logoutService}getUserService(){return this.userService}getMessageReceiveService(){return this.messageReceiveService}handleErrorMessage(e){if(e.payload&&"error"in e.payload){const s=e.payload.error;console.error(s)}}}class U{constructor(e,s,t){this.lastRequest=null,this.firstRenderCompleted=!1,this.socketUrl=e,this.socket=new WebSocket(this.socketUrl),this.loginService=new g(this,s,t),this.chatService=new f(this,s,t),this.router=s,this.state=t,this.handleMessage=this.handleMessage.bind(this),this.handleClose=this.handleClose.bind(this),this.handleError=this.handleError.bind(this),this.setupEventListener()}getState(){return this.state}getChatService(){return this.chatService}getLoginService(){return this.loginService}sendRequest(e,s){return new Promise((t=>{const r=()=>{this.socket.send(JSON.stringify(e)),this.lastRequest=s,t()};this.socket.readyState===WebSocket.OPEN?r():this.socket.addEventListener("open",r)}))}close(){this.socket.close()}handleUserLoginAndLogout(e){const s=this.chatService.getLogoutService();if("USER_LOGIN"!==e.type)if("USER_EXTERNAL_LOGIN"!==e.type)if("USER_LOGOUT"!==e.type){if("USER_EXTERNAL_LOGOUT"===e.type){const{user:t}=e.payload;s.handleUserExternalLogout(t)}}else s.handleUserLogout();else{const{user:s}=e.payload;this.loginService.handleUserExternal(s)}else this.loginService.handleUserLogin(e)}handleUsers(e){const s=this.chatService.getUserService();"USER_ACTIVE"!==e.type?"USER_INACTIVE"===e.type&&s.handleUsers(e):s.handleUsers(e)}handleReceivedMessages(e){const s=this.chatService.getMessageReceiveService();if("MSG_SEND"!==e.type)if("MSG_FROM_USER"!==e.type)if("MSG_DELIVER"!==e.type){if("MSG_READ"===e.type){const{message:t}=e.payload;s.handleResponseReadStatusChange(t)}if("MSG_DELETE"===e.type){const{message:t}=e.payload;s.handleResponseDeleteMessage(t)}if("MSG_EDIT"===e.type){const{message:t}=e.payload;s.handleResponseEditMessage(t)}}else{const{message:t}=e.payload;s.handleResponseDeliveryStatusChange(t)}else{const{messages:t}=e.payload;s.handleResponseHistoryMessages(t)}else{const{message:t}=e.payload;s.handleResponseWithReceivedMessages(t)}}handleMessage(e){const s=JSON.parse(e.data);"USER_LOGIN"!==s.type&&"USER_EXTERNAL_LOGIN"!==s.type&&"USER_LOGOUT"!==s.type&&"USER_EXTERNAL_LOGOUT"!==s.type?"USER_ACTIVE"!==s.type&&"USER_INACTIVE"!==s.type?("MSG_SEND"!==s.type&&"MSG_FROM_USER"!==s.type&&"MSG_DELIVER"!==s.type&&"MSG_READ"!==s.type&&"MSG_DELETE"!==s.type&&"MSG_EDIT"!==s.type||this.handleReceivedMessages(s),"ERROR"===s.type&&this.lastRequest&&(this.lastRequest.handleErrorMessage(s),this.lastRequest=null)):this.handleUsers(s):this.handleUserLoginAndLogout(s)}onMessage(){this.socket.addEventListener("message",this.handleMessage)}onConnection(){this.clearReconnectInterval(),this.socket.addEventListener("open",(()=>{const e=document.querySelector(".loader");e&&e.classList.remove("show");const s=n.d.getUserData();if(s){const{id:e,login:t,password:r}=s;this.loginService.login(e,t,r)}console.log("WebSocket connection established")}))}handleClose(e){this.showLoader(),console.log(`WebSocket connection ${e.type} code: ${e.code}`),this.reconnect()}handleError(e){this.showLoader(),console.log(`WebSocket connection ${e.type}`),this.reconnect()}reconnect(){this.reconnectIntervalId||(this.reconnectIntervalId=setInterval((()=>{this.socket=new WebSocket(this.socketUrl),this.setupEventListener(),this.state.clearSelectedUserMessages(),this.router.updateContentForCurrentRoute()}),3e3))}clearReconnectInterval(){this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0)}showLoader(){const e=document.querySelector(".loader");e&&e.classList.add("show")}onCloseConnection(){this.socket.addEventListener("close",this.handleClose)}onErrorConnection(){this.socket.addEventListener("error",this.handleError)}setupEventListener(){this.onConnection(),this.onMessage(),this.onCloseConnection(),this.onErrorConnection()}}class m extends c.S{constructor(){super({tag:"div",classNames:["loader__container"]})}}class b extends c.S{constructor(){super({tag:"div",classNames:["loader__spinner"]})}}class E extends c.S{constructor(){super({tag:"p",classNames:["loader__text"],textContent:"Please wait, connecting to the server..."})}}class y extends c.S{constructor(){super({tag:"div",classNames:["loader"]}),this.setupLoader()}setupLoader(){const e=(new m).getElement(),s=(new E).getElement(),t=(new b).getElement();e.append(s,t),this.addInnerElement(e)}}var R=function(e,s,t,r){return new(t||(t=Promise))((function(a,i){function n(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var s;e.done?a(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(n,o)}l((r=r.apply(e,s||[])).next())}))};(new class{constructor(){this.state=new h,this.router=new d(this.initialRoutes()),this.socket=new U("ws://localhost:4000",this.router,this.state),this.main=new u}render(){const e=(new y).getElement();document.body.append(this.main.getElement(),e)}updateContent(e){this.main.updateRender(e)}initialRoutes(){return[{path:"login",callback:()=>R(this,void 0,void 0,(function*(){const{Login:e}=yield a.e(920).then(a.bind(a,920));this.updateContent(new e(this.socket,this.router))}))},{path:"chat",callback:()=>R(this,void 0,void 0,(function*(){const{Chat:e}=yield a.e(424).then(a.bind(a,202));this.updateContent(new e(this.socket,this.router))}))},{path:"about",callback:()=>R(this,void 0,void 0,(function*(){const{About:e}=yield a.e(962).then(a.bind(a,962));this.updateContent(new e(this.router))}))},{path:"not-found",callback:()=>R(this,void 0,void 0,(function*(){const{NotFount:e}=yield a.e(988).then(a.bind(a,988));this.updateContent(new e)}))}]}}).render()})()})();