!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var X=e.g.document;if(!t&&X&&(X.currentScript&&(t=X.currentScript.src),!t)){var l=X.getElementsByTagName("script");if(l.length)for(var a=l.length-1;a>-1&&!t;)t=l[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();const t=[{template:[["X",".",".",".","X"],[".","X","X","X","."],[".","X","X","X","."],[".","X","X","X","."],["X",".",".",".","X"]],hints:{rows:[[1,1],[3],[3],[3],[1,1]],cols:[[1,1],[3],[3],[3],[1,1]]},level:"easy",name:"sun"},{template:[["X","X","X","X","X"],["X",".","X",".","X"],["X","X","X","X","X"],["X",".","X",".","X"],["X","X","X","X","X"]],hints:{rows:[[5],[1,1,1],[5],[1,1,1],[5]],cols:[[5],[1,1,1],[5],[1,1,1],[5]]},level:"easy",name:"grid"},{template:[[".","X",".","X","."],["X","X",".","X","X"],[".",".","X",".","."],["X","X",".","X","X"],[".","X",".","X","."]],hints:{rows:[[1,1],[2,2],[1],[2,2],[1,1]],cols:[[1,1],[2,2],[1],[2,2],[1,1]]},level:"easy",name:"flower"},{template:[[".",".","X","X","X"],["X",".",".",".","X"],["X","X",".",".","."],["X","X","X",".","."],["X","X","X","X","X"]],hints:{rows:[[3],[1,1],[2],[3],[5]],cols:[[4],[3],[1,2],[1,1],[2,1]]},level:"easy",name:"tetris"},{template:[["X",".",".",".","X"],["X",".","X",".","X"],["X","X","X","X","X"],["X",".","X",".","X"],["X",".",".",".","X"]],hints:{rows:[[1,1],[1,1,1],[5],[1,1,1],[1,1]],cols:[[5],[1],[3],[1],[5]]},level:"easy",name:"panzer"}],X=e=>{let{light:t,dark:X}=e;const l=localStorage.getItem("theme");let a="";return a=l?"light"===l?t:X:t,a},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=document.createElement(e);return t&&"string"==typeof t&&n.classList.add(t),Array.isArray(t)&&t.forEach((e=>{e&&n.classList.add(e)})),X&&(n.textContent=X),l&&(n.dataset[l]=l),a&&(n.id=a),n},a=e=>localStorage.removeItem(e),n=e=>localStorage.setItem("theme",e),s=(e,t,X)=>{e.classList.contains(t)?(e.classList.remove(t),e.classList.add(X),a("dark"),n("light")):e.classList.contains(X)&&(e.classList.remove(X),e.classList.add(t),a("light"),n("dark"))},r=e=>{const t=e.target,X=document.querySelector("body"),l=document.querySelectorAll(".game__cell_5x5"),a=document.querySelectorAll(".game__cell_10x10"),n=document.querySelectorAll(".game__cell_15x15"),r=document.querySelectorAll(".hints__cell_5x5"),i=document.querySelectorAll(".hints__cell_10x10"),o=document.querySelectorAll(".hints__cell_15x15"),d=document.querySelectorAll(".level__item"),c=document.querySelectorAll(".reset__button"),_=document.querySelectorAll(".template__cell"),m=document.querySelector(".game__grid_5x5"),p=document.querySelector(".game__grid_10x10"),h=document.querySelector(".game__grid_15x15"),u=document.querySelector(".hints__top_5x5"),g=document.querySelector(".hints__top_10x10"),k=document.querySelector(".hints__top_15x15"),v=document.querySelector(".hints__left_5x5"),S=document.querySelector(".hints__left_10x10"),f=document.querySelector(".hints__left_15x15");t&&s(t,"dark__button","light__button"),X&&s(X,"dark-theme","light-theme"),m&&s(m,"dark__grid","light__grid"),p&&s(p,"dark__grid","light__grid"),h&&s(h,"dark__grid","light__grid"),u&&s(u,"dark__top","light__top"),g&&s(g,"dark__top","light__top"),k&&s(k,"dark__top","light__top"),v&&s(v,"dark__left","light__left"),S&&s(S,"dark__left","light__left"),f&&s(f,"dark__left","light__left"),l&&l.forEach((e=>{s(e,"dark__cell","light__cell"),s(e,"dark__checked","light__checked"),s(e,"dark__cross","light__cross")})),a&&a.forEach((e=>{s(e,"dark__cell","light__cell"),s(e,"dark__checked","light__checked"),s(e,"dark__cross","light__cross")})),n&&n.forEach((e=>{s(e,"dark__cell","light__cell"),s(e,"dark__checked","light__checked"),s(e,"dark__cross","light__cross")})),d&&d.forEach((e=>{s(e,"dark__button","light__button"),s(e,"dark__button_active","light__button_active")})),c&&c.forEach((e=>{s(e,"dark__button","light__button")})),r&&r.forEach((e=>{s(e,"dark__hints","light__hints")})),i&&i.forEach((e=>{s(e,"dark__hints","light__hints")})),o&&o.forEach((e=>{s(e,"dark__hints","light__hints")})),_&&_.forEach((e=>{s(e,"dark__cell","light__cell"),s(e,"dark__checked","light__checked")}))},i=[{template:[["X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".",".","X","X","X","X",".",".","X"],["X",".","X",".",".",".",".","X",".","X"],["X","X","X","X","X","X","X","X","X","X"]],hints:{rows:[[10],[1,1],[1,2,2,1],[1,2,2,1],[1,2,1],[1,2,1],[1,1],[1,4,1],[1,1,1,1],[10]],cols:[[10],[1,1],[1,2,2],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,2],[1,1],[10]]},level:"medium",name:"sad smile"},{template:[["X",".",".",".",".",".",".",".",".","X"],["X","X",".",".",".",".",".",".","X","X"],["X",".","X",".","X","X",".","X",".","X"],[".",".",".","X","X","X","X",".",".","."],[".",".",".",".","X","X",".",".",".","."],[".",".",".",".","X","X",".",".",".","."],[".",".",".","X","X","X","X",".",".","."],["X",".","X",".","X","X",".","X",".","X"],["X","X",".",".",".",".",".",".","X","X"],["X",".",".",".",".",".",".",".",".","X"]],hints:{rows:[[1,1],[2,2],[1,1,2,1,1],[4],[2],[2],[4],[1,1,2,1,1],[2,2],[1,1]],cols:[[3,3],[1,1],[1,1],[1,1],[6],[6],[1,1],[1,1],[1,1],[3,3]]},level:"medium",name:"spider"},{template:[["X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".","X",".",".",".",".","X",".","X"],["X",".",".","X","X","X","X",".",".","X"],["X",".",".",".",".",".",".",".",".","X"],["X","X","X","X","X","X","X","X","X","X"]],hints:{rows:[[10],[1,1],[1,2,2,1],[1,2,2,1],[1,2,1],[1,2,1],[1,1,1,1],[1,4,1],[1,1],[10]],cols:[[10],[1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,1],[10]]},level:"medium",name:"happy smile"},{template:[[".",".","X",".","X",".",".",".",".","."],[".","X","X",".","X","X",".",".",".","."],[".","X","X","X","X","X",".",".",".","."],["X","X",".","X",".","X","X",".",".","X"],[".","X","X","X","X","X",".",".","X","X"],[".",".","X","X","X",".",".",".","X","."],["X","X","X","X","X","X",".",".","X","X"],["X",".","X","X","X","X","X",".",".","X"],[".",".","X","X","X","X","X","X","X","X"],[".","X","X",".","X","X","X","X",".","."]],hints:{rows:[[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],cols:[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]]},level:"medium",name:"puppy"},{template:[[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".","X","X","X","X","X","X","X","X","."],["X","X","X","X","X","X","X","X","X","X"],["X","X","X","X","X","X","X","X","X","X"],["X","X",".","X","X","X","X",".","X","X"],[".","X","X","X",".",".","X","X","X","."],[".",".","X","X","X","X","X","X",".","."]],hints:{rows:[[2,2],[2,2],[2,2],[2,2],[8],[10],[10],[2,4,2],[3,3],[6]],cols:[[3],[5],[7,2],[10],[4,1],[4,1],[10],[7,2],[5],[3]]},level:"medium",name:"rabbit"}],o=[{template:[[".",".",".",".",".",".",".",".","X","X",".",".","X","X","X"],[".",".",".",".",".",".","X","X",".","X","X","X",".","X","."],[".",".",".",".",".",".",".",".","X","X",".",".","X",".","."],[".",".",".",".","X","X",".",".","X","X",".","X",".",".","."],[".",".",".",".","X",".","X",".",".","X","X",".",".",".","."],[".","X","X","X","X","X",".",".",".",".","X",".",".",".","."],["X","X","X",".",".","X",".",".",".","X","X","X","X",".","."],[".",".","X","X","X",".",".",".",".",".",".",".",".",".","."],[".",".",".","X",".",".",".",".",".",".",".",".",".",".","."],[".",".",".","X",".",".",".",".",".",".",".","X","X",".","."],[".",".",".","X",".","X",".",".",".",".",".","X","X",".","."],["X","X","X","X","X","X",".",".",".",".","X",".",".","X","."],[".",".",".",".",".",".",".",".",".","X","X","X","X","X","X"],[".",".",".",".",".",".",".",".",".",".",".","X","X",".","."],[".",".",".",".",".",".",".",".",".",".",".","X","X",".","."]],hints:{rows:[[2,3],[2,3,1],[2,1],[2,2,1],[1,1,2],[5,1],[3,1,4],[3],[1],[1,2],[1,1,2],[6,1,1],[6],[2],[2]],cols:[[1,1],[2,1],[3,1],[1,5],[3,1,1],[1,2,2],[1,1],[1],[1,2],[5,1,1],[1,3,2],[1,1,1,2,3],[1,1,1,2,3],[2,2],[1,1]]},level:"hard",name:"ducks"},{template:[["X","X","X",".","X",".",".",".",".",".",".","X",".",".","X"],["X","X","X","X",".",".",".",".",".",".","X",".","X","X","."],["X","X","X",".",".",".",".",".",".","X",".",".",".",".","."],[".","X",".","X",".",".",".",".","X","X","X",".",".",".","."],["X",".",".",".","X",".",".","X","X","X","X","X",".",".","."],[".",".",".",".",".",".","X","X","X","X","X","X","X",".","."],[".",".",".",".",".",".","X","X","X","X","X","X","X",".","."],[".","X",".","X",".",".","X","X","X","X","X","X","X",".","."],[".","X","X","X",".",".","X","X",".",".","X","X","X",".","."],["X","X",".","X","X",".","X","X",".",".","X","X","X",".","."],[".","X",".","X",".",".","X","X","X","X","X","X","X",".","."],[".",".","X",".",".",".","X","X","X","X","X","X","X",".","."],[".","X","X","X",".",".",".",".","X","X",".",".",".",".","."],[".",".","X",".",".",".","X","X","X",".",".",".",".",".","."],[".",".","X",".",".","X","X",".",".",".",".",".",".",".","."]],hints:{rows:[[3,1,1,1],[4,1,2],[3,1],[1,1,3],[1,1,5],[7],[7],[1,1,7],[3,2,3],[2,2,2,3],[1,1,7],[1,7],[3,2],[1,3],[1,2]],cols:[[3,1,1],[4,4,1],[3,1,4],[1,1,4,1],[1,1,1],[1],[7,2],[8,1],[5,4],[6,3],[1,9],[1,8],[1,7],[1],[1]]},level:"hard",name:"house"},{template:[["X","X",".",".","X",".",".",".",".",".","X",".",".","X","X"],["X",".",".",".",".","X","X","X","X","X",".",".",".",".","X"],[".",".",".",".","X",".",".",".",".",".","X",".",".",".","."],[".",".",".","X","X","X",".",".",".","X","X","X",".",".","."],[".","X","X","X","X","X","X",".","X","X","X","X","X","X","."],["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"],["X","X","X","X",".","X","X","X","X","X",".","X","X","X","X"],["X","X","X",".",".",".","X","X","X",".",".",".","X","X","X"],["X","X","X","X","X","X",".",".",".","X","X","X","X","X","X"],["X","X","X","X","X","X","X",".","X","X","X","X","X","X","."],[".",".",".","X","X",".",".","X",".",".","X","X",".",".","."],[".",".",".",".","X","X",".",".",".","X","X",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."],[".",".",".",".",".",".",".","X",".",".",".",".",".",".","."]],hints:{rows:[[2,1,1,2],[1,5,1],[1,1],[3,3],[6,6],[15],[4,5,4],[3,3,3],[6,6],[7,6],[2,1,2],[2,2],[5],[3],[1]],cols:[[2,5],[1,6],[6],[4,3],[1,4,4],[1,4,2,2],[1,4,1,2],[1,3,1,3],[1,4,1,2],[1,4,2,2],[1,4,4],[4,3],[6],[1,6],[2,4]]},level:"hard",name:"heart"},{template:[[".",".",".",".",".","X","X","X","X",".",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".","X","X"],[".","X","X","X",".",".","X","X","X",".",".",".","X","X","X"],["X","X","X","X","X",".",".","X",".",".",".","X","X","X","X"],[".","X","X","X",".",".",".","X",".",".",".",".","X","X","X"],[".","X","X",".","X",".",".","X",".",".",".","X",".","X","X"],[".",".",".",".",".","X",".","X",".",".","X",".",".",".","."],[".",".",".",".",".",".","X","X",".","X",".",".",".",".","."],[".",".",".",".","X","X","X","X","X","X","X",".",".",".","."],[".","X","X","X","X","X","X","X","X","X","X","X","X","X","."],[".","X",".",".","X","X","X","X","X","X","X",".",".","X","."],[".","X","X","X","X","X","X","X","X","X","X","X","X","X","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."]],hints:{rows:[[4],[5,2],[3,3,3],[5,1,4],[3,1,3],[2,1,1,1,2],[1,1,1],[2,1],[7],[13],[1,7,1],[13],[5],[5],[3]],cols:[[1],[4,3],[4,1,1],[3,1,1],[1,1,4],[2,1,6],[3,8],[15],[3,8],[1,7],[1,4],[1,1,1,1],[3,1,1],[5,3],[5]]},level:"hard",name:"flowers"},{template:[[".",".",".",".",".",".",".",".","X","X","X","X",".",".","."],[".",".",".",".",".",".",".","X","X","X","X",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X","X",".",".",".","."],[".",".",".","X","X","X","X","X","X","X","X","X",".",".","."],[".",".","X","X","X","X","X","X","X","X","X","X","X",".","."],[".","X","X",".","X","X","X","X","X","X","X","X","X","X","."],["X","X","X","X","X","X",".",".",".",".",".","X","X","X","X"],[".",".",".",".",".","X","X","X","X",".",".",".","X","X","X"],[".",".",".",".",".",".","X","X",".",".","X",".","X","X","."],[".",".",".",".",".",".",".",".",".",".","X","X","X",".","."],[".",".",".",".",".","X","X","X",".",".","X","X",".",".","."],[".",".",".",".",".",".",".","X","X","X","X",".",".",".","."],[".",".",".",".",".",".",".","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."]],hints:{rows:[[4],[4],[5],[6],[9],[11],[2,10],[6,4],[4,3],[2,1,2],[3],[3,2],[4],[3],[3]],cols:[[1],[2],[3],[2,1],[4],[7,1],[5,2,1,1],[6,2,4],[7,1,3],[7,2],[2,4,4],[1,4,2],[6],[4],[2]]},level:"hard",name:"dolphin"}],d={easy:t,medium:i,hard:o},c={templateWrapper:"template__wrapper",templateItem_5:"template__item_5x5",templateItem_10:"template__item_10x10",templateItem_15:"template__item_15x15",templateSell:"template__cell",templateSell_5:"template__cell_5x5",templateSell_10:"template__cell_10x10",templateSell_15:"template__cell_15x15"},_="modal-dark",m="modal-dark__show",p="modal-light",h="modal-light__show",u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const n=X({light:p,dark:_}),s=X({light:h,dark:m}),r=X({light:"modal-light__content",dark:"modal-dark__content"}),i=X({light:"modal-light__title",dark:"modal-dark__title"}),o=X({light:"modal-light__button",dark:"modal-dark__button"}),d=l("div",[n,s]),c=l("div",r),u=`Great! You have solved the nonogram in time ${t.formatMinutes} : ${t.formatSeconds} !`,g=l("h3",i,u.toLocaleUpperCase());c.append(g),e&&c.append(e);const k=l("button",o,"New Game");return k.addEventListener("click",(()=>{(e=>{e.pauseAllSounds();const t=document.querySelector("body"),l=X({light:p,dark:_}),a=document.querySelector(`.${l}`),n=X({light:"modal-light__hide",dark:"modal-dark__hide"}),s=X({light:h,dark:m});a.classList.add(n),a.classList.remove(s),t.classList.remove("body__hidden"),t.innerHTML="",Z()})(a)})),c.append(k),d.append(c),d},g={gameWrapper_5:"game__wrapper_5x5",gameWrapper_10:"game__wrapper_10x10",gameWrapper_15:"game__wrapper_15x15",gameGrid_5:"game__grid_5x5",gameGrid_10:"game__grid_10x10",gameGrid_15:"game__grid_15x15",gameCell:"game__cell",gameCell_5:"game__cell_5x5",gameCell_10:"game__cell_10x10",gameCell_15:"game__cell_15x15"},k={easy:t,medium:i,hard:o},v=(e,t,a)=>{{t.startTime||t.start("timer__duration");const n=e.target;if(n.classList.contains(g.gameCell_5)||n.classList.contains(g.gameCell_10)||n.classList.contains(g.gameCell_15)){const e=X({light:"light__checked",dark:"dark__checked"}),s=X({light:"light__cross",dark:"dark__cross"});if(n.classList.contains(s)&&n.classList.remove(s),n.classList.toggle(e),a.playBlackCellSound(),(e=>{const t=e.parentElement.querySelectorAll("div"),l=+e.parentElement.id,a=e.parentElement.dataset.level,n=k[a][l-1].template.length,s=k[a][l-1].template,r=X({light:"light__checked",dark:"dark__checked"});for(let e=0;e<t.length;e++){const X=t[e],l=e%n,a="X"===s[Math.floor(e/n)][l],i=X.classList.contains(r);if(a&&!i||!a&&i)return!1}return!0})(n)){const e=t.formatTime();((e,t)=>{const X=t.parentElement,l=X.dataset.level;(e=>{let{templateName:t,level:X,formatTime:l}=e;const{formatMinutes:a,formatSeconds:n}=l;let s=JSON.parse(localStorage.getItem("records"))||[];const r={templateName:t,level:X,formatTime:l,time:60*+a+ +n};s.unshift(r),s=s.slice(0,5);const i=JSON.stringify(s);localStorage.setItem("records",i)})({templateName:X.dataset.name,level:l,formatTime:e})})(e,n),t.stop(),a.playVictorySound(),setTimeout((()=>{((e,t,a)=>{const n=document.querySelector("body"),s=e.parentElement,r=((e,t)=>{const a=d[t][e-1].template,n=a.length,s=l("div",c.templateWrapper),r=l("div",c[`templateItem_${n}`]),i=[];return a.forEach((e=>{const t=X({light:"light__cell",dark:"dark__cell"});e.forEach((e=>{const a=l("div",[c.templateSell,c[`templateSell_${n}`],t]);if("X"===e){const e=X({light:"light__checked",dark:"dark__checked"});a.classList.add(e)}i.push(a)}))})),r.append(...i),s.append(r),s})(+s.id,s.dataset.level),i=u(r,t,a);n.append(i),n.classList.add("body__hidden")})(n,e,a)}),200)}}}},S=(e,t,a,n,s)=>{const r=X({light:"light__grid",dark:"dark__grid"}),i=X({light:"light__cell",dark:"dark__cell"}),o=k[t][e-1].template,d=l("div",[g[`gameGrid_${a}`],r]),c=e=>v(e,n,s),_=e=>((e,t,l)=>{e.preventDefault(),t.startTime||t.start("timer__duration");const a=e.target,n=X({light:"light__checked",dark:"dark__checked"}),s=X({light:"light__cross",dark:"dark__cross"});a.classList.contains(n)&&a.classList.remove(n),a.classList.toggle(s),l.playXCellSound()})(e,n,s);return o.forEach((e=>{e.forEach((e=>{const t=l("div",[g.gameCell,g[`gameCell_${a}`],i]);"X"===e&&(t.dataset.mark=e),d.append(t)}))})),d.id=e,d.dataset.level=t,d.dataset.name=k[t][e-1].name,d.addEventListener("click",c),d.addEventListener("contextmenu",_),d.clickHandler=c,d.contextMenuHandler=_,d},f={hintsCell_5:"hints__cell_5x5",hintsCell_10:"hints__cell_10x10",hintsCell_15:"hints__cell_15x15",hintsNum_5:"hints__num_5x5",hintsNum_10:"hints__num_10x10",hintsNum_15:"hints__num_15x15"},y={easy:t,medium:i,hard:o},b=(e,t,a)=>{const n=X({light:"light__hints",dark:"dark__hints"}),s=y[t][0].template.length,r=y[t][e-1].hints[a],i=new DocumentFragment;return r.forEach((e=>{const t=l("div",[f[`hintsCell_${s}`],n]);e.forEach((e=>{const X=l("span",[f[`hintsNum_${s}`]],e);t.append(X)})),i.append(t)})),i},L="reset__button",x={easy:5,medium:10,hard:15},w=e=>{const t=document.querySelectorAll(".light__cell, .dark__cell"),a=t[0].parentElement.id,n=t[0].parentElement.dataset.level,s=((e,t,l)=>{const a=X({light:"light__checked",dark:"dark__checked"}),n=X({light:"light__cross",dark:"dark__cross"}),s=t[l],r=t[l],i=Array.from({length:s}).map((()=>Array.from({length:r},(()=>[]))));return e.forEach(((e,t)=>{const X=Math.floor(t/r),l=t%s;i[X][l]=(e=>{const{cell:t,checked:X,cross:l}=e;let a="";return a=t.classList.contains(X)?"checked":t.classList.contains(l)?"cross":"empty",a})({cell:e,checked:a,cross:n})})),i})(t,x,n),r={saveStateCellsMatrix:s,templateLevel:n,templateId:a,time:e.saveState()},i=JSON.stringify(r);localStorage.setItem("saveGame",i),(()=>{const e=document.querySelector("body"),t=document.querySelector(".popup");let X=null;t?(X=t,X.classList.toggle("show")):X=l("div",["popup","show"],"The game progress is saved"),e.append(X),(e=>{setTimeout((()=>{e.classList.remove("show")}),2e3)})(X)})()},E=e=>{const t=X({light:"light__button",dark:"dark__button"}),a=l("section",["reset","container"]),n=l("div","reset__list"),s=l("button",[L,t],"Reset Game"),r=l("button",[L,t,"reset__button_new"],"New Game"),i=l("button",[L,t],"Save Game"),o=l("button",[L,t,"reset__button_solution"],"Solution");return s.addEventListener("click",(()=>{document.querySelector(".timer__duration").innerHTML="00 : 00",e.stop(),(()=>{const e=document.querySelector('[data-mark="X"]').parentElement,t=+e.id,X=e.dataset.level,l=S(t,X,x[X]).children;e.innerHTML="",e.append(...l)})()})),r.addEventListener("click",(()=>{e.stop(),document.querySelector("body").innerHTML="",Z()})),o.addEventListener("click",(()=>{e.stop(),(()=>{const e=document.querySelectorAll(".reset__button");for(const t of e)t.classList.contains("reset__button_new")||(t.disabled=!0);(()=>{const e=X({light:"light__checked",dark:"dark__checked"}),t=X({light:"light__cross",dark:"dark__cross"}),l=document.querySelectorAll('[data-mark="X"]'),a=l[0].parentElement;a.removeEventListener("click",a.clickHandler),a.removeEventListener("contextmenu",a.contextMenuHandler);const n=a.querySelectorAll("div");for(const X of n)X.classList.remove(e,t);for(const t of l)t.classList.add(e)})()})()})),i.addEventListener("click",(()=>{w(e)})),n.append(s),n.append(i),n.append(o),n.append(r),a.append(n),a},T={hintsTop_5:"hints__top_5x5",hintsTop_10:"hints__top_10x10",hintsTop_15:"hints__top_15x15"},q={easy:t,medium:i,hard:o},C={hintsLeft_5:"hints__left_5x5",hintsLeft_10:"hints__left_10x10",hintsLeft_15:"hints__left_15x15"},I={easy:t,medium:i,hard:o},M=(e,t,a,n)=>{const s=l("div",["game","container"]),r=l("div","nonograms"),i=E(a),o=(()=>{const e=l("section",["timer","container"]),t=l("div",["timer__wrapper"]),X=l("span",["timer__title"]),a=l("span",["timer__duration"],"00 : 00");return t.append(X),t.append(a),e.append(t),t})();r.append(o),r.append(i),r.append(i);const d=((e,t,X,a)=>{const n=k[t][0].template.length,s=l("div",g[`gameWrapper_${n}`]),r=S(e,t,n,X,a);return s.append(r),s})(e,t,a,n),c=(e=>{const t=q[e][0].template.length,a=X({light:"light__top",dark:"dark__top"});return l("div",[T[`hintsTop_${t}`],a])})(t),_=b(e,t,"cols");c.append(_),d.append(c);const m=(e=>{const t=I[e][0].template.length,a=X({light:"light__left",dark:"dark__left"});return l("div",[C[`hintsLeft_${t}`],a])})(t),p=b(e,t,"rows");return m.append(p),d.append(m),s.append(d),r.append(s),r},A={template:"template",container:"container",templateWrapper:"template__wrapper",templateImages:"template__images",templateItem_5:"template__item_5x5",templateItem_10:"template__item_10x10",templateItem_15:"template__item_15x15",templateSell:"template__cell",templateSell_5:"template__cell_5x5",templateSell_10:"template__cell_10x10",templateSell_15:"template__cell_15x15"},$=(e,t)=>{const a=X({light:"light__cell",dark:"dark__cell"}),n=[];return e.forEach(((e,s)=>{let{template:r,level:i,name:o}=e;const d=l("div",A.templateImages),c=l("p",null,o),_=l("div",A[`templateItem_${t}`],null,i,s+1);r.forEach((e=>{const s=[];e.forEach((e=>{const n=l("div",[A.templateSell,A[`templateSell_${t}`],a]);if("X"===e){const e=X({light:"light__checked",dark:"dark__checked"});n.classList.add(e)}s.push(n)})),_.append(...s),d.append(c),d.append(_),n.push(d)}))})),n},G={easy:t,medium:i,hard:o},N=e=>{const t=e.target;if(t&&"BUTTON"===t.nodeName){if(t.classList.contains("level__item_continue"))return;(e=>{const t=G[e.id],X=t[0].template.length,l=document.querySelector(".template__wrapper"),a=$(t,X);l&&(l.innerHTML="",l.append(...a))})(t),document.querySelector(".level__list").querySelectorAll("button").forEach((e=>{e.disabled=!1,e.classList.contains("dark__button")?e.classList.remove("dark__button_active"):e.classList.remove("light__button_active")})),t.classList.contains("dark__button")?t.classList.add("dark__button_active"):t.classList.add("light__button_active"),t.disabled=!0}},H=[{text:"Easy (5x5)",id:"easy"},{text:"Medium (10x10)",id:"medium"},{text:"Hard (15x15)",id:"hard"}],D=[["easy",t],["medium",i],["hard",o]],O="table__cell",W="table__row_result",J="level__item",B="level__item_continue";let F=!1;const j=e=>{const t=X({light:"light__button_active",dark:"dark__button_active"});e.classList.toggle(t)},R=(e,t)=>{const a=X({light:"light__button",dark:"dark__button"}),n=l("section",["level","container"]),s=l("div","level__list"),r=l("button",[J,B,a],"Random Game");r.addEventListener("click",(()=>{((e,t)=>{const{randomGameIndex:X,randomGame:l}=(()=>{const e=Math.floor(Math.random()*D.length),t=D[e],X=Math.floor(Math.random()*t[1].length);return{randomGameIndex:X,randomGame:t[1][X].level}})(),a=M(X+1,l,e,t);document.querySelector("body").innerHTML="",Q(a)})(e,t)}));const i=l("button",[J,B,a],"Results Games");if(i.addEventListener("click",(e=>{(e=>{const t=document.querySelector(".select"),X=document.querySelector(".table");if(F=!F,F){const X=(()=>{const e=l("div",["table","container"]),t=l("div",["table__row"]),X=l("div",[O],"name"),a=l("div",[O],"difficulty"),n=l("div",[O],"time");t.append(X),t.append(a),t.append(n),e.append(t);const s=(()=>{const e=JSON.parse(localStorage.getItem("records"));if(e){e.sort(((e,t)=>e.time-t.time));const t=new DocumentFragment;for(const X of e){const e=l("div",W),a=l("div",O,X.templateName),n=l("div",O,X.level),s=l("div",O,`${X.formatTime.formatMinutes} : ${X.formatTime.formatSeconds}`);e.append(a),e.append(n),e.append(s),t.append(e)}return t}{const e=l("div",W),t=l("div",O,"---"),X=l("div",O,"---"),a=l("div",O,"-- : --");return e.append(t),e.append(X),e.append(a),e}})();return e.append(s),e})();j(e.target),t.append(X)}else X&&(j(e.target),X.remove())})(e)})),s.append(r),s.append(i),localStorage.getItem("saveGame")){const n=l("button",[J,B,a],"Continue Game");s.append(n),n.addEventListener("click",(()=>{((e,t)=>{const l=localStorage.getItem("saveGame");if(l){const a=JSON.parse(l),{saveStateCellsMatrix:n,templateId:s,templateLevel:r,time:i}=a,o=M(s,r,e,t);e.restoreState(i,"timer__duration"),document.querySelector("body").innerHTML="",Q(o),(e=>{const t=document.querySelectorAll(".game__cell"),l=e[0].length,a=X({light:"light__checked",dark:"dark__checked"}),n=X({light:"light__cross",dark:"dark__cross"});for(let X=0;X<t.length;X++){const s=t[X],r=Math.floor(X/l),i=X%l;"checked"===e[r][i]&&s.classList.add(a),"cross"===e[r][i]&&s.classList.add(n)}})(n)}})(e,t)}))}return n.append(s),n},U=(e,t,a)=>{const n=new DocumentFragment,s=l("div","select"),r=(()=>{const e=X({light:"light__button",dark:"dark__button"}),t=X({light:"light__button_active",dark:"dark__button_active"}),a=l("section",["level","container"]),n=l("div","level__list"),s=H.map((X=>{const a="easy"===X.id?t:"",n="easy"===X.id,s=l("button",["level__item",e,a],X.text,null,X.id);return n&&(s.disabled=!0),s}));return n.append(...s),a.append(n),n.addEventListener("click",N),a})(),i=R(t,a),o=((e,t,X)=>{const a=e[0].template.length,n=l("section",[A.template,A.container]),s=l("div",A.templateWrapper);return s.append(...$(e,a)),s.addEventListener("click",(e=>{((e,t,X)=>{const l=e.target.closest(`.${A.templateItem_5}`)||e.target.closest(`.${A.templateItem_10}`)||e.target.closest(`.${A.templateItem_15}`);if(l){const e=l.id,a=Object.values(l.dataset)[0],n=M(e,a,t,X);document.querySelector("body").innerHTML="",Q(n)}})(e,t,X)})),n.append(s),n})(e,t,a);return s.append(r),s.append(i),n.append(s),n.append(o),n};var V=e.p+"assets/audio/click.mp3",z=e.p+"assets/audio/click_two.mp3",P=e.p+"assets/audio/finish.mp3";const Y=new class{constructor(){this.startTime=null,this.elapsedSeconds=null,this.intervalId=null,this.displayTime=null}start(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.reset(),this.startTime=(new Date).getTime()),this.intervalId=setInterval(this.update.bind(this,e),1e3)}reset(){this.stop()}stop(){this.startTime=null,this.elapsedSeconds=null,this.displayTime=null,clearInterval(this.intervalId)}update(e){const t=(new Date).getTime();this.elapsedSeconds=Math.floor((t-this.startTime)/1e3),this.updateDisplayTime(e)}formatTime(){const e=Math.floor(this.elapsedSeconds/60),t=this.elapsedSeconds%60;return{formatMinutes:String(e).padStart(2,"0"),formatSeconds:String(t).padStart(2,"0")}}updateDisplayTime(e){if(this.displayTime=document.querySelector(`.${e}`),this.displayTime){const{formatMinutes:e,formatSeconds:t}=this.formatTime();this.displayTime.textContent="",this.displayTime.textContent=`${e} : ${t}`}}saveState(){return{startTime:this.startTime,elapsedSeconds:this.elapsedSeconds}}restoreState(e,t){null!==e.startTime&&null!==e.elapsedSeconds&&(this.elapsedSeconds=e.elapsedSeconds,this.startTime=(new Date).getTime()-1e3*this.elapsedSeconds,this.start(t,!0))}},K=new class{constructor(){this.blackCellSound=new Audio(V),this.xCellSound=new Audio(z),this.victorySound=new Audio(P)}playBlackCellSound(){this.blackCellSound.play()}playXCellSound(){this.xCellSound.play()}playVictorySound(){this.victorySound.play()}pauseAllSounds(){this.blackCellSound.pause(),this.xCellSound.pause(),this.victorySound.pause()}},Q=e=>{const t=X({light:"light-theme",dark:"dark-theme"}),a=document.querySelector("body");a.classList.add(t);const n=(()=>{const e=X({light:"light__button",dark:"dark__button"}),t=l("header","container"),a=l("h1","title","Nonograms Game"),n=l("button",e,"Change Theme",null,"toggle-theme");return n.addEventListener("click",r),t.append(a),t.append(n),t})(),s=l("main","main");s.append(e),a.append(n),a.append(s)},Z=()=>{const e=U(t,Y,K);Q(e)};document.addEventListener("DOMContentLoaded",(()=>{Z()}))}();