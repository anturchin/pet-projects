!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var l=e.g.document;if(!t&&l&&(l.currentScript&&(t=l.currentScript.src),!t)){var X=l.getElementsByTagName("script");if(X.length)for(var a=X.length-1;a>-1&&!t;)t=X[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();const t=[{template:[["X",".",".",".","X"],[".","X","X","X","."],[".","X","X","X","."],[".","X","X","X","."],["X",".",".",".","X"]],hints:{rows:[[1,1],[3],[3],[3],[1,1]],cols:[[1,1],[3],[3],[3],[1,1]]},level:"easy",name:"sun"},{template:[["X","X","X","X","X"],["X",".","X",".","X"],["X","X","X","X","X"],["X",".","X",".","X"],["X","X","X","X","X"]],hints:{rows:[[5],[1,1,1],[5],[1,1,1],[5]],cols:[[5],[1,1,1],[5],[1,1,1],[5]]},level:"easy",name:"grid"},{template:[[".","X",".","X","."],["X","X",".","X","X"],[".",".","X",".","."],["X","X",".","X","X"],[".","X",".","X","."]],hints:{rows:[[1,1],[2,2],[1],[2,2],[1,1]],cols:[[1,1],[2,2],[1],[2,2],[1,1]]},level:"easy",name:"flower"},{template:[[".",".","X","X","X"],["X",".",".",".","X"],["X","X",".",".","."],["X","X","X",".","."],["X","X","X","X","X"]],hints:{rows:[[3],[1,1],[2],[3],[5]],cols:[[4],[3],[1,2],[1,1],[2,1]]},level:"easy",name:"tetris"},{template:[["X",".",".",".","X"],["X",".","X",".","X"],["X","X","X","X","X"],["X",".","X",".","X"],["X",".",".",".","X"]],hints:{rows:[[1,1],[1,1,1],[5],[1,1,1],[1,1]],cols:[[5],[1],[3],[1],[5]]},level:"easy",name:"panzer"}],l=e=>{let{light:t,dark:l}=e;const X=localStorage.getItem("theme");let a="";return a=X?"light"===X?t:l:t,a},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,X=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=document.createElement(e);return t&&"string"==typeof t&&n.classList.add(t),Array.isArray(t)&&t.forEach((e=>{e&&n.classList.add(e)})),l&&(n.textContent=l),X&&(n.dataset[X]=X),a&&(n.id=a),n},a=e=>localStorage.removeItem(e),n=e=>localStorage.setItem("theme",e),r=(e,t,l)=>{e.classList.contains(t)?(e.classList.remove(t),e.classList.add(l),a("dark"),n("light")):e.classList.contains(l)&&(e.classList.remove(l),e.classList.add(t),a("light"),n("dark"))},s=e=>{const t=e.target,l=document.querySelector("body"),X=document.querySelectorAll(".game__cell_5x5"),a=document.querySelectorAll(".game__cell_10x10"),n=document.querySelectorAll(".game__cell_15x15"),s=document.querySelectorAll(".hints__cell_5x5"),o=document.querySelectorAll(".hints__cell_10x10"),i=document.querySelectorAll(".hints__cell_15x15"),d=document.querySelectorAll(".level__item"),_=document.querySelectorAll(".reset__button"),c=document.querySelectorAll(".template__cell"),m=document.querySelector(".game__grid_5x5"),p=document.querySelector(".game__grid_10x10"),h=document.querySelector(".game__grid_15x15"),u=document.querySelector(".hints__top_5x5"),g=document.querySelector(".hints__top_10x10"),k=document.querySelector(".hints__top_15x15"),v=document.querySelector(".hints__left_5x5"),S=document.querySelector(".hints__left_10x10"),f=document.querySelector(".hints__left_15x15"),y=document.querySelectorAll(".hints__num_5x5"),b=document.querySelectorAll(".hints__num_10x10"),L=document.querySelectorAll(".hints__num_15x15");t&&r(t,"dark__button","light__button"),l&&r(l,"dark-theme","light-theme"),m&&r(m,"dark__grid","light__grid"),p&&r(p,"dark__grid","light__grid"),h&&r(h,"dark__grid","light__grid"),u&&r(u,"dark__top","light__top"),g&&r(g,"dark__top","light__top"),k&&r(k,"dark__top","light__top"),v&&r(v,"dark__left","light__left"),S&&r(S,"dark__left","light__left"),f&&r(f,"dark__left","light__left"),X&&X.forEach((e=>{r(e,"dark__cell","light__cell"),r(e,"dark__checked","light__checked"),r(e,"dark__cross","light__cross")})),a&&a.forEach((e=>{r(e,"dark__cell","light__cell"),r(e,"dark__checked","light__checked"),r(e,"dark__cross","light__cross")})),n&&n.forEach((e=>{r(e,"dark__cell","light__cell"),r(e,"dark__checked","light__checked"),r(e,"dark__cross","light__cross")})),d&&d.forEach((e=>{r(e,"dark__button","light__button"),r(e,"dark__button_active","light__button_active")})),_&&_.forEach((e=>{r(e,"dark__button","light__button")})),s&&s.forEach((e=>{r(e,"dark__hints","light__hints")})),o&&o.forEach((e=>{r(e,"dark__hints","light__hints")})),i&&i.forEach((e=>{r(e,"dark__hints","light__hints")})),c&&c.forEach((e=>{r(e,"dark__cell","light__cell"),r(e,"dark__checked","light__checked")})),y&&y.forEach((e=>{r(e,"dark__cell","light__cell")})),b&&b.forEach((e=>{r(e,"dark__cell","light__cell")})),L&&L.forEach((e=>{r(e,"dark__cell","light__cell")}))},o=[{template:[["X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".",".","X","X","X","X",".",".","X"],["X",".","X",".",".",".",".","X",".","X"],["X","X","X","X","X","X","X","X","X","X"]],hints:{rows:[[10],[1,1],[1,2,2,1],[1,2,2,1],[1,2,1],[1,2,1],[1,1],[1,4,1],[1,1,1,1],[10]],cols:[[10],[1,1],[1,2,2],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,2],[1,1],[10]]},level:"medium",name:"sad smile"},{template:[["X",".",".",".",".",".",".",".",".","X"],["X","X",".",".",".",".",".",".","X","X"],["X",".","X",".","X","X",".","X",".","X"],[".",".",".","X","X","X","X",".",".","."],[".",".",".",".","X","X",".",".",".","."],[".",".",".",".","X","X",".",".",".","."],[".",".",".","X","X","X","X",".",".","."],["X",".","X",".","X","X",".","X",".","X"],["X","X",".",".",".",".",".",".","X","X"],["X",".",".",".",".",".",".",".",".","X"]],hints:{rows:[[1,1],[2,2],[1,1,2,1,1],[4],[2],[2],[4],[1,1,2,1,1],[2,2],[1,1]],cols:[[3,3],[1,1],[1,1],[1,1],[6],[6],[1,1],[1,1],[1,1],[3,3]]},level:"medium",name:"spider"},{template:[["X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".","X","X",".",".","X","X",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".",".",".","X","X",".",".",".","X"],["X",".","X",".",".",".",".","X",".","X"],["X",".",".","X","X","X","X",".",".","X"],["X",".",".",".",".",".",".",".",".","X"],["X","X","X","X","X","X","X","X","X","X"]],hints:{rows:[[10],[1,1],[1,2,2,1],[1,2,2,1],[1,2,1],[1,2,1],[1,1,1,1],[1,4,1],[1,1],[10]],cols:[[10],[1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,2,1,1],[1,1],[10]]},level:"medium",name:"happy smile"},{template:[[".",".","X",".","X",".",".",".",".","."],[".","X","X",".","X","X",".",".",".","."],[".","X","X","X","X","X",".",".",".","."],["X","X",".","X",".","X","X",".",".","X"],[".","X","X","X","X","X",".",".","X","X"],[".",".","X","X","X",".",".",".","X","."],["X","X","X","X","X","X",".",".","X","X"],["X",".","X","X","X","X","X",".",".","X"],[".",".","X","X","X","X","X","X","X","X"],[".","X","X",".","X","X","X","X",".","."]],hints:{rows:[[1,1],[2,2],[5],[2,1,2,1],[5,2],[3,1],[6,2],[1,5,1],[8],[2,4]],cols:[[1,2],[4,1,1],[3,6],[7],[3,6],[4,4],[1,3],[2],[3,1],[2,3]]},level:"medium",name:"puppy"},{template:[[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".",".","X","X",".",".","X","X",".","."],[".","X","X","X","X","X","X","X","X","."],["X","X","X","X","X","X","X","X","X","X"],["X","X","X","X","X","X","X","X","X","X"],["X","X",".","X","X","X","X",".","X","X"],[".","X","X","X",".",".","X","X","X","."],[".",".","X","X","X","X","X","X",".","."]],hints:{rows:[[2,2],[2,2],[2,2],[2,2],[8],[10],[10],[2,4,2],[3,3],[6]],cols:[[3],[5],[7,2],[10],[4,1],[4,1],[10],[7,2],[5],[3]]},level:"medium",name:"rabbit"}],i=[{template:[[".",".",".",".",".",".",".",".","X","X",".",".","X","X","X"],[".",".",".",".",".",".","X","X",".","X","X","X",".","X","."],[".",".",".",".",".",".",".",".","X","X",".",".","X",".","."],[".",".",".",".","X","X",".",".","X","X",".","X",".",".","."],[".",".",".",".","X",".","X",".",".","X","X",".",".",".","."],[".","X","X","X","X","X",".",".",".",".","X",".",".",".","."],["X","X","X",".",".","X",".",".",".","X","X","X","X",".","."],[".",".","X","X","X",".",".",".",".",".",".",".",".",".","."],[".",".",".","X",".",".",".",".",".",".",".",".",".",".","."],[".",".",".","X",".",".",".",".",".",".",".","X","X",".","."],[".",".",".","X",".","X",".",".",".",".",".","X","X",".","."],["X","X","X","X","X","X",".",".",".",".","X",".",".","X","."],[".",".",".",".",".",".",".",".",".","X","X","X","X","X","X"],[".",".",".",".",".",".",".",".",".",".",".","X","X",".","."],[".",".",".",".",".",".",".",".",".",".",".","X","X",".","."]],hints:{rows:[[2,3],[2,3,1],[2,1],[2,2,1],[1,1,2],[5,1],[3,1,4],[3],[1],[1,2],[1,1,2],[6,1,1],[6],[2],[2]],cols:[[1,1],[2,1],[3,1],[1,5],[3,1,1],[1,2,2],[1,1],[1],[1,2],[5,1,1],[1,3,2],[1,1,1,2,3],[1,1,1,2,3],[2,2],[1,1]]},level:"hard",name:"ducks"},{template:[["X","X","X",".","X",".",".",".",".",".",".","X",".",".","X"],["X","X","X","X",".",".",".",".",".",".","X",".","X","X","."],["X","X","X",".",".",".",".",".",".","X",".",".",".",".","."],[".","X",".","X",".",".",".",".","X","X","X",".",".",".","."],["X",".",".",".","X",".",".","X","X","X","X","X",".",".","."],[".",".",".",".",".",".","X","X","X","X","X","X","X",".","."],[".",".",".",".",".",".","X","X","X","X","X","X","X",".","."],[".","X",".","X",".",".","X","X","X","X","X","X","X",".","."],[".","X","X","X",".",".","X","X",".",".","X","X","X",".","."],["X","X",".","X","X",".","X","X",".",".","X","X","X",".","."],[".","X",".","X",".",".","X","X","X","X","X","X","X",".","."],[".",".","X",".",".",".","X","X","X","X","X","X","X",".","."],[".","X","X","X",".",".",".",".","X","X",".",".",".",".","."],[".",".","X",".",".",".","X","X","X",".",".",".",".",".","."],[".",".","X",".",".","X","X",".",".",".",".",".",".",".","."]],hints:{rows:[[3,1,1,1],[4,1,2],[3,1],[1,1,3],[1,1,5],[7],[7],[1,1,7],[3,2,3],[2,2,2,3],[1,1,7],[1,7],[3,2],[1,3],[1,2]],cols:[[3,1,1],[4,4,1],[3,1,4],[1,1,4,1],[1,1,1],[1],[7,2],[8,1],[5,4],[6,3],[1,9],[1,8],[1,7],[1],[1]]},level:"hard",name:"house"},{template:[["X","X",".",".","X",".",".",".",".",".","X",".",".","X","X"],["X",".",".",".",".","X","X","X","X","X",".",".",".",".","X"],[".",".",".",".","X",".",".",".",".",".","X",".",".",".","."],[".",".",".","X","X","X",".",".",".","X","X","X",".",".","."],[".","X","X","X","X","X","X",".","X","X","X","X","X","X","."],["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"],["X","X","X","X",".","X","X","X","X","X",".","X","X","X","X"],["X","X","X",".",".",".","X","X","X",".",".",".","X","X","X"],["X","X","X","X","X","X",".",".",".","X","X","X","X","X","X"],["X","X","X","X","X","X","X",".","X","X","X","X","X","X","."],[".",".",".","X","X",".",".","X",".",".","X","X",".",".","."],[".",".",".",".","X","X",".",".",".","X","X",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."],[".",".",".",".",".",".",".","X",".",".",".",".",".",".","."]],hints:{rows:[[2,1,1,2],[1,5,1],[1,1],[3,3],[6,6],[15],[4,5,4],[3,3,3],[6,6],[7,6],[2,1,2],[2,2],[5],[3],[1]],cols:[[2,5],[1,6],[6],[4,3],[1,4,4],[1,4,2,2],[1,4,1,2],[1,3,1,3],[1,4,1,2],[1,4,2,2],[1,4,4],[4,3],[6],[1,6],[2,4]]},level:"hard",name:"heart"},{template:[[".",".",".",".",".","X","X","X","X",".",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".","X","X"],[".","X","X","X",".",".","X","X","X",".",".",".","X","X","X"],["X","X","X","X","X",".",".","X",".",".",".","X","X","X","X"],[".","X","X","X",".",".",".","X",".",".",".",".","X","X","X"],[".","X","X",".","X",".",".","X",".",".",".","X",".","X","X"],[".",".",".",".",".","X",".","X",".",".","X",".",".",".","."],[".",".",".",".",".",".","X","X",".","X",".",".",".",".","."],[".",".",".",".","X","X","X","X","X","X","X",".",".",".","."],[".","X","X","X","X","X","X","X","X","X","X","X","X","X","."],[".","X",".",".","X","X","X","X","X","X","X",".",".","X","."],[".","X","X","X","X","X","X","X","X","X","X","X","X","X","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."]],hints:{rows:[[4],[5,2],[3,3,3],[5,1,4],[3,1,3],[2,1,1,1,2],[1,1,1],[2,1],[7],[13],[1,7,1],[13],[5],[5],[3]],cols:[[1],[4,3],[4,1,1],[3,1,1],[1,1,4],[2,1,6],[3,8],[15],[3,8],[1,7],[1,4],[1,1,1,1],[3,1,1],[5,3],[5]]},level:"hard",name:"flowers"},{template:[[".",".",".",".",".",".",".",".","X","X","X","X",".",".","."],[".",".",".",".",".",".",".","X","X","X","X",".",".",".","."],[".",".",".",".",".","X","X","X","X","X",".",".",".",".","."],[".",".",".",".",".","X","X","X","X","X","X",".",".",".","."],[".",".",".","X","X","X","X","X","X","X","X","X",".",".","."],[".",".","X","X","X","X","X","X","X","X","X","X","X",".","."],[".","X","X",".","X","X","X","X","X","X","X","X","X","X","."],["X","X","X","X","X","X",".",".",".",".",".","X","X","X","X"],[".",".",".",".",".","X","X","X","X",".",".",".","X","X","X"],[".",".",".",".",".",".","X","X",".",".","X",".","X","X","."],[".",".",".",".",".",".",".",".",".",".","X","X","X",".","."],[".",".",".",".",".","X","X","X",".",".","X","X",".",".","."],[".",".",".",".",".",".",".","X","X","X","X",".",".",".","."],[".",".",".",".",".",".",".","X","X","X",".",".",".",".","."],[".",".",".",".",".",".","X","X","X",".",".",".",".",".","."]],hints:{rows:[[4],[4],[5],[6],[9],[11],[2,10],[6,4],[4,3],[2,1,2],[3],[3,2],[4],[3],[3]],cols:[[1],[2],[3],[2,1],[4],[7,1],[5,2,1,1],[6,2,4],[7,1,3],[7,2],[2,4,4],[1,4,2],[6],[4],[2]]},level:"hard",name:"dolphin"}],d={easy:t,medium:o,hard:i},_={templateWrapper:"template__wrapper",templateItem_5:"template__item_5x5",templateItem_10:"template__item_10x10",templateItem_15:"template__item_15x15",templateSell:"template__cell",templateSell_5:"template__cell_5x5",templateSell_10:"template__cell_10x10",templateSell_15:"template__cell_15x15"},c="modal-dark",m="modal-dark__show",p="modal-light",h="modal-light__show",u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const n=l({light:p,dark:c}),r=l({light:h,dark:m}),s=l({light:"modal-light__content",dark:"modal-dark__content"}),o=l({light:"modal-light__title",dark:"modal-dark__title"}),i=l({light:"modal-light__button",dark:"modal-dark__button"}),d=X("div",[n,r]),_=X("div",s),u=`Great! You have solved the nonogram in time ${t.formatMinutes} : ${t.formatSeconds} !`,g=X("h3",o,u.toLocaleUpperCase());_.append(g),e&&_.append(e);const k=X("button",i,"New Game");return k.addEventListener("click",(()=>{(e=>{e.pauseAllSounds();const t=document.querySelector("body"),X=l({light:p,dark:c}),a=document.querySelector(`.${X}`),n=l({light:"modal-light__hide",dark:"modal-dark__hide"}),r=l({light:h,dark:m});a.classList.add(n),a.classList.remove(r),t.classList.remove("body__hidden"),t.innerHTML="",Z()})(a)})),_.append(k),d.append(_),d},g={gameWrapper_5:"game__wrapper_5x5",gameWrapper_10:"game__wrapper_10x10",gameWrapper_15:"game__wrapper_15x15",gameGrid_5:"game__grid_5x5",gameGrid_10:"game__grid_10x10",gameGrid_15:"game__grid_15x15",gameCell:"game__cell",gameCell_5:"game__cell_5x5",gameCell_10:"game__cell_10x10",gameCell_15:"game__cell_15x15"},k={easy:t,medium:o,hard:i},v=(e,t,a)=>{{t.startTime||t.start("timer__duration");const n=e.target;if(n.classList.contains(g.gameCell_5)||n.classList.contains(g.gameCell_10)||n.classList.contains(g.gameCell_15)){const e=l({light:"light__checked",dark:"dark__checked"}),r=l({light:"light__cross",dark:"dark__cross"});if(n.classList.contains(r)&&n.classList.remove(r),n.classList.toggle(e),a.playBlackCellSound(),(e=>{const t=e.parentElement.querySelectorAll("div"),X=+e.parentElement.id,a=e.parentElement.dataset.level,n=k[a][X-1].template.length,r=k[a][X-1].template,s=l({light:"light__checked",dark:"dark__checked"});for(let e=0;e<t.length;e++){const l=t[e],X=e%n,a="X"===r[Math.floor(e/n)][X],o=l.classList.contains(s);if(a&&!o||!a&&o)return!1}return!0})(n)){const e=t.formatTime();((e,t)=>{const l=t.parentElement,X=l.dataset.level;(e=>{let{templateName:t,level:l,formatTime:X}=e;const{formatMinutes:a,formatSeconds:n}=X;let r=JSON.parse(localStorage.getItem("records"))||[];const s={templateName:t,level:l,formatTime:X,time:60*+a+ +n};r.unshift(s),r=r.slice(0,5);const o=JSON.stringify(r);localStorage.setItem("records",o)})({templateName:l.dataset.name,level:X,formatTime:e})})(e,n),t.stop(),a.playVictorySound(),setTimeout((()=>{((e,t,a)=>{const n=document.querySelector("body"),r=e.parentElement,s=((e,t,a)=>{const n=d[t][e-1].template,r=n.length,s=X("div",_.templateWrapper),o=X("p",null,a),i=X("div",_[`templateItem_${r}`]),c=[];return n.forEach((e=>{const t=l({light:"light__cell",dark:"dark__cell"});e.forEach((e=>{const a=X("div",[_.templateSell,_[`templateSell_${r}`],t]);if("X"===e){const e=l({light:"light__checked",dark:"dark__checked"});a.classList.add(e)}c.push(a)}))})),i.append(...c),s.append(o),s.append(i),s})(+r.id,r.dataset.level,r.dataset.name),o=u(s,t,a);n.append(o),n.classList.add("body__hidden")})(n,e,a)}),200)}}}},S=(e,t,a,n,r)=>{const s=l({light:"light__grid",dark:"dark__grid"}),o=l({light:"light__cell",dark:"dark__cell"}),i=k[t][e-1].template,d=X("div",[g[`gameGrid_${a}`],s]),_=e=>v(e,n,r),c=e=>((e,t,X)=>{e.preventDefault(),t.startTime||t.start("timer__duration");const a=e.target,n=l({light:"light__checked",dark:"dark__checked"}),r=l({light:"light__cross",dark:"dark__cross"});a.classList.contains(n)&&a.classList.remove(n),a.classList.toggle(r),X.playXCellSound()})(e,n,r);return i.forEach((e=>{e.forEach((e=>{const t=X("div",[g.gameCell,g[`gameCell_${a}`],o]);"X"===e&&(t.dataset.mark=e),d.append(t)}))})),d.id=e,d.dataset.level=t,d.dataset.name=k[t][e-1].name,d.addEventListener("click",_),d.addEventListener("contextmenu",c),d.clickHandler=_,d.contextMenuHandler=c,d},f={hintsCell_5:"hints__cell_5x5",hintsCell_10:"hints__cell_10x10",hintsCell_15:"hints__cell_15x15",hintsNum_5:"hints__num_5x5",hintsNum_10:"hints__num_10x10",hintsNum_15:"hints__num_15x15"},y={easy:t,medium:o,hard:i},b=(e,t,a)=>{const n=l({light:"light__hints",dark:"dark__hints"}),r=l({light:"light__cell",dark:"dark__cell"}),s=y[t][0].template.length,o=y[t][e-1].hints[a],i=new DocumentFragment,d=o.reduce(((e,t)=>t.length>e.length?t:e),[]);for(let e=0;e<o.length;e++){const t=X("div",[f[`hintsCell_${s}`],n]);for(let l=0;l<d.length;l++){const a=o[e][l]||"",n=X("span",[f[`hintsNum_${s}`],r],a);a?t.append(n):t.prepend(n)}i.append(t)}return i},L="reset__button",x={easy:5,medium:10,hard:15},w=e=>{const t=document.querySelectorAll(".game__cell"),a=t[0].parentElement.id,n=t[0].parentElement.dataset.level,r=((e,t,X)=>{const a=l({light:"light__checked",dark:"dark__checked"}),n=l({light:"light__cross",dark:"dark__cross"}),r=t[X],s=t[X],o=Array.from({length:r}).map((()=>Array.from({length:s},(()=>[]))));return e.forEach(((e,t)=>{const l=Math.floor(t/s),X=t%r;o[l][X]=(e=>{const{cell:t,checked:l,cross:X}=e;let a="";return a=t.classList.contains(l)?"checked":t.classList.contains(X)?"cross":"empty",a})({cell:e,checked:a,cross:n})})),o})(t,x,n),s={saveStateCellsMatrix:r,templateLevel:n,templateId:a,time:e.saveState()},o=JSON.stringify(s);localStorage.setItem("saveGame",o),(()=>{const e=document.querySelector("body"),t=document.querySelector(".popup");let l=null;t?(l=t,l.classList.toggle("show")):l=X("div",["popup","show"],"The game progress is saved"),e.append(l),(e=>{setTimeout((()=>{e.classList.remove("show")}),2e3)})(l)})()},E=e=>{const t=l({light:"light__button",dark:"dark__button"}),a=X("section",["reset","container"]),n=X("div","reset__list"),r=X("button",[L,t],"Reset Game"),s=X("button",[L,t,"reset__button_new"],"New Game"),o=X("button",[L,t],"Save Game"),i=X("button",[L,t,"reset__button_solution"],"Solution");return r.addEventListener("click",(()=>{document.querySelector(".timer__duration").innerHTML="00 : 00",e.stop(),(()=>{const e=document.querySelector('[data-mark="X"]').parentElement,t=+e.id,l=e.dataset.level,X=S(t,l,x[l]).children;e.innerHTML="",e.append(...X)})()})),s.addEventListener("click",(()=>{e.stop(),document.querySelector("body").innerHTML="",Z()})),i.addEventListener("click",(()=>{e.stop(),(()=>{const e=document.querySelectorAll(".reset__button");for(const t of e)t.classList.contains("reset__button_new")||(t.disabled=!0);(()=>{const e=l({light:"light__checked",dark:"dark__checked"}),t=l({light:"light__cross",dark:"dark__cross"}),X=document.querySelectorAll('[data-mark="X"]'),a=X[0].parentElement;a.removeEventListener("click",a.clickHandler),a.removeEventListener("contextmenu",a.contextMenuHandler);const n=a.querySelectorAll("div");for(const l of n)l.classList.remove(e,t);for(const t of X)t.classList.add(e)})()})()})),o.addEventListener("click",(()=>{w(e)})),n.append(r),n.append(o),n.append(i),n.append(s),a.append(n),a},T={hintsTop_5:"hints__top_5x5",hintsTop_10:"hints__top_10x10",hintsTop_15:"hints__top_15x15"},q={easy:t,medium:o,hard:i},C={hintsLeft_5:"hints__left_5x5",hintsLeft_10:"hints__left_10x10",hintsLeft_15:"hints__left_15x15"},I={easy:t,medium:o,hard:i},A=(e,t,a,n)=>{const r=X("div",["game","container"]),s=X("div","nonograms"),o=E(a),i=(()=>{const e=X("section",["timer","container"]),t=X("div",["timer__wrapper"]),l=X("span",["timer__title"]),a=X("span",["timer__duration"],"00 : 00");return t.append(l),t.append(a),e.append(t),t})();s.append(i),s.append(o),s.append(o);const d=((e,t,l,a)=>{const n=k[t][0].template.length,r=X("div",g[`gameWrapper_${n}`]),s=S(e,t,n,l,a);return r.append(s),r})(e,t,a,n),_=(e=>{const t=q[e][0].template.length,a=l({light:"light__top",dark:"dark__top"});return X("div",[T[`hintsTop_${t}`],a])})(t),c=b(e,t,"cols");_.append(c),d.append(_);const m=(e=>{const t=I[e][0].template.length,a=l({light:"light__left",dark:"dark__left"});return X("div",[C[`hintsLeft_${t}`],a])})(t),p=b(e,t,"rows");return m.append(p),d.append(m),r.append(d),s.append(r),s},M={template:"template",container:"container",templateWrapper:"template__wrapper",templateImages:"template__images",templateItem_5:"template__item_5x5",templateItem_10:"template__item_10x10",templateItem_15:"template__item_15x15",templateSell:"template__cell",templateSell_5:"template__cell_5x5",templateSell_10:"template__cell_10x10",templateSell_15:"template__cell_15x15"},$=(e,t)=>{const a=l({light:"light__cell",dark:"dark__cell"}),n=[];return e.forEach(((e,r)=>{let{template:s,level:o,name:i}=e;const d=X("div",M.templateImages),_=X("p",null,i),c=X("div",M[`templateItem_${t}`],null,o,r+1);s.forEach((e=>{const r=[];e.forEach((e=>{const n=X("div",[M.templateSell,M[`templateSell_${t}`],a]);if("X"===e){const e=l({light:"light__checked",dark:"dark__checked"});n.classList.add(e)}r.push(n)})),c.append(...r),d.append(_),d.append(c),n.push(d)}))})),n},G={easy:t,medium:o,hard:i},N=e=>{const t=e.target;if(t&&"BUTTON"===t.nodeName){if(t.classList.contains("level__item_continue"))return;(e=>{const t=G[e.id],l=t[0].template.length,X=document.querySelector(".template__wrapper"),a=$(t,l);X&&(X.innerHTML="",X.append(...a))})(t),document.querySelector(".level__list").querySelectorAll("button").forEach((e=>{e.disabled=!1,e.classList.contains("dark__button")?e.classList.remove("dark__button_active"):e.classList.remove("light__button_active")})),t.classList.contains("dark__button")?t.classList.add("dark__button_active"):t.classList.add("light__button_active"),t.disabled=!0}},H=[{text:"Easy (5x5)",id:"easy"},{text:"Medium (10x10)",id:"medium"},{text:"Hard (15x15)",id:"hard"}],D=[["easy",t],["medium",o],["hard",i]],O="table__cell",W="table__row_result",J="level__item",B="level__item_continue";let F=!1;const j=e=>{const t=l({light:"light__button_active",dark:"dark__button_active"});e.classList.toggle(t)},R=(e,t)=>{const a=l({light:"light__button",dark:"dark__button"}),n=X("section",["level","container"]),r=X("div","level__list"),s=X("button",[J,B,a],"Random Game");s.addEventListener("click",(()=>{((e,t)=>{const{randomGameIndex:l,randomGame:X}=(()=>{const e=Math.floor(Math.random()*D.length),t=D[e],l=Math.floor(Math.random()*t[1].length);return{randomGameIndex:l,randomGame:t[1][l].level}})(),a=A(l+1,X,e,t);document.querySelector("body").innerHTML="",Q(a)})(e,t)}));const o=X("button",[J,B,a],"Results Games");if(o.addEventListener("click",(e=>{(e=>{const t=document.querySelector(".select"),l=document.querySelector(".table");if(F=!F,F){const l=(()=>{const e=X("div",["table","container"]),t=X("div",["table__row"]),l=X("div",[O],"name"),a=X("div",[O],"difficulty"),n=X("div",[O],"time");t.append(l),t.append(a),t.append(n),e.append(t);const r=(()=>{const e=JSON.parse(localStorage.getItem("records"));if(e){e.sort(((e,t)=>e.time-t.time));const t=new DocumentFragment;for(const l of e){const e=X("div",W),a=X("div",O,l.templateName),n=X("div",O,l.level),r=X("div",O,`${l.formatTime.formatMinutes} : ${l.formatTime.formatSeconds}`);e.append(a),e.append(n),e.append(r),t.append(e)}return t}{const e=X("div",W),t=X("div",O,"---"),l=X("div",O,"---"),a=X("div",O,"-- : --");return e.append(t),e.append(l),e.append(a),e}})();return e.append(r),e})();j(e.target),t.append(l)}else l&&(j(e.target),l.remove())})(e)})),r.append(s),r.append(o),localStorage.getItem("saveGame")){const n=X("button",[J,B,a],"Continue Game");r.append(n),n.addEventListener("click",(()=>{((e,t)=>{const X=localStorage.getItem("saveGame");if(X){const a=JSON.parse(X),{saveStateCellsMatrix:n,templateId:r,templateLevel:s,time:o}=a,i=A(r,s,e,t);e.restoreState(o,"timer__duration"),document.querySelector("body").innerHTML="",Q(i),(e=>{const t=document.querySelectorAll(".game__cell"),X=e[0].length,a=l({light:"light__checked",dark:"dark__checked"}),n=l({light:"light__cross",dark:"dark__cross"});for(let l=0;l<t.length;l++){const r=t[l],s=Math.floor(l/X),o=l%X;"checked"===e[s][o]&&r.classList.add(a),"cross"===e[s][o]&&r.classList.add(n)}})(n)}})(e,t)}))}return n.append(r),n},U=(e,t,a)=>{const n=new DocumentFragment,r=X("div","select"),s=(()=>{const e=l({light:"light__button",dark:"dark__button"}),t=l({light:"light__button_active",dark:"dark__button_active"}),a=X("section",["level","container"]),n=X("div","level__list"),r=H.map((l=>{const a="easy"===l.id?t:"",n="easy"===l.id,r=X("button",["level__item",e,a],l.text,null,l.id);return n&&(r.disabled=!0),r}));return n.append(...r),a.append(n),n.addEventListener("click",N),a})(),o=R(t,a),i=((e,t,l)=>{const a=e[0].template.length,n=X("section",[M.template,M.container]),r=X("div",M.templateWrapper);return r.append(...$(e,a)),r.addEventListener("click",(e=>{((e,t,l)=>{const X=e.target.closest(`.${M.templateItem_5}`)||e.target.closest(`.${M.templateItem_10}`)||e.target.closest(`.${M.templateItem_15}`);if(X){const e=X.id,a=Object.values(X.dataset)[0],n=A(e,a,t,l);document.querySelector("body").innerHTML="",Q(n)}})(e,t,l)})),n.append(r),n})(e,t,a);return r.append(s),r.append(o),n.append(r),n.append(i),n};var V=e.p+"assets/audio/click.mp3",z=e.p+"assets/audio/click_two.mp3",P=e.p+"assets/audio/finish.mp3";const Y=new class{constructor(){this.startTime=null,this.elapsedSeconds=null,this.intervalId=null,this.displayTime=null}start(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.reset(),this.startTime=(new Date).getTime()),this.intervalId=setInterval(this.update.bind(this,e),1e3)}reset(){this.stop()}stop(){this.startTime=null,this.elapsedSeconds=null,this.displayTime=null,clearInterval(this.intervalId)}update(e){const t=(new Date).getTime();this.elapsedSeconds=Math.floor((t-this.startTime)/1e3),this.updateDisplayTime(e)}formatTime(){const e=Math.floor(this.elapsedSeconds/60),t=this.elapsedSeconds%60;return{formatMinutes:String(e).padStart(2,"0"),formatSeconds:String(t).padStart(2,"0")}}updateDisplayTime(e){if(this.displayTime=document.querySelector(`.${e}`),this.displayTime){const{formatMinutes:e,formatSeconds:t}=this.formatTime();this.displayTime.textContent="",this.displayTime.textContent=`${e} : ${t}`}}saveState(){return{startTime:this.startTime,elapsedSeconds:this.elapsedSeconds}}restoreState(e,t){null!==e.startTime&&null!==e.elapsedSeconds&&(this.elapsedSeconds=e.elapsedSeconds,this.startTime=(new Date).getTime()-1e3*this.elapsedSeconds,this.start(t,!0))}},K=new class{constructor(){this.blackCellSound=new Audio(V),this.xCellSound=new Audio(z),this.victorySound=new Audio(P)}playBlackCellSound(){this.blackCellSound.play()}playXCellSound(){this.xCellSound.play()}playVictorySound(){this.victorySound.play()}pauseAllSounds(){this.blackCellSound.pause(),this.xCellSound.pause(),this.victorySound.pause()}},Q=e=>{const t=l({light:"light-theme",dark:"dark-theme"}),a=document.querySelector("body");a.classList.add(t);const n=(()=>{const e=l({light:"light__button",dark:"dark__button"}),t=X("header","container"),a=X("h1","title","Nonograms Game"),n=X("button",e,"Change Theme",null,"toggle-theme");return n.addEventListener("click",s),t.append(a),t.append(n),t})(),r=X("main","main");r.append(e),a.append(n),a.append(r)},Z=()=>{const e=U(t,Y,K);Q(e)};document.addEventListener("DOMContentLoaded",(()=>{Z()}))}();