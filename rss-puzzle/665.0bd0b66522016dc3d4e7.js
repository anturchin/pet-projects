"use strict";(self.webpackChunkRSS_Puzzle=self.webpackChunkRSS_Puzzle||[]).push([[665],{665:(t,e,s)=>{s.r(e),s.d(e,{Login:()=>c});var n=s(766);class i extends n.S{constructor(t){super({tag:"input",classNames:["login__form-field"],callback:null}),this.minimumLength=t.minimumLength,this.validationFn=null,t.callback&&(this.validationFn=t.callback),this.setupInput(t),this.setupEventListener()}setupInput(t){const e=this.viewHtmlElementCreator.getElement();e.setAttribute("type",t.type),e.setAttribute("placeholder",t.label),t.required&&e.setAttribute("required",`${t.required}`)}render(){throw new Error("Method not implemented.")}destroy(){throw new Error("Method not implemented.")}setupEventListener(){this.viewHtmlElementCreator.getElement().addEventListener("input",this.handleInput.bind(this))}handleInput(t){const e=t.target.value;this.validationFn&&(this.validationFn(e,this.minimumLength)?this.viewHtmlElementCreator.getElement().classList.remove("error"):this.viewHtmlElementCreator.getElement().classList.add("error"))}}class r extends n.S{constructor(t){super({tag:"button",classNames:["login__button"],callback:null}),this.setupInput(t)}setupInput(t){const e=this.viewHtmlElementCreator.getElement();e.textContent=t.label,t.disabled&&(e.disabled=t.disabled)}}class a{static isAllowedCharacters(t){return/^[a-zA-Z-]+$/.test(t)}static isLetter(t){return/^[A-Za-z]$/.test(t)}static isFirstLetterUpperCase(t){const e=t.charAt(0);return a.isLetter(e)&&e===e.toUpperCase()}static hasMinimumLength(t,e){return t.length>=e}}var l=s(226);class o{constructor(t){const e={tag:"div",classNames:["error__massage"],textContent:t,callback:null};this.errorMessageElement=new l.Y(e)}showError(t){this.errorMessageElement&&t.after(this.errorMessageElement.getElement())}hideError(){this.errorMessageElement&&(this.errorMessageElement.getElement().remove(),this.errorMessageElement=null)}}var m=s(440);const u="\n    The name field must contain at least 3 characters,\n    the surname field must contain at least 4 characters,\n    both in Latin characters, and start with a capital letter.\n";class h extends n.S{constructor(t,e,s=3,n=4){super({tag:"form",classNames:["login__form"],callback:null}),this.minimumLengthName=s,this.minimumLengthSurname=n,this.router=t,this.headerInstance=e,this.firstNameInput=null,this.surnameInput=null,this.loginButton=null,this.setupFormContent(),this.setupEventListener()}setupFormContent(){this.firstNameInput=new i({type:"text",label:"Name",required:!0,callback:this.validateFirstName.bind(this),minimumLength:this.minimumLengthName}),this.surnameInput=new i({type:"text",label:"Surname",required:!0,callback:this.validateFirstName.bind(this),minimumLength:this.minimumLengthSurname}),this.loginButton=new r({label:"Login"}),[this.firstNameInput.getElement(),this.surnameInput.getElement(),this.loginButton.getElement()].forEach((t=>{this.viewHtmlElementCreator.addInnerElement(t)}))}setupEventListener(){this.viewHtmlElementCreator.getElement().addEventListener("submit",this.onHandleSubmit.bind(this))}validate(t,e){const s=a.isAllowedCharacters(t),n=a.isFirstLetterUpperCase(t),i=a.hasMinimumLength(t,e);return s&&n&&i}validateFirstName(t,e){return this.validate(t,e)}closeErrorMessage(t,e){var s,n;e?(t.hideError(),e.hideError(),(null===(n=this.loginButton)||void 0===n?void 0:n.getElement()).disabled=!1):(t.hideError(),(null===(s=this.loginButton)||void 0===s?void 0:s.getElement()).disabled=!1)}showErrorMessage(t,e){var s,n;if(e){const s=new o(u),i=new o(u);s.showError(t.getElement()),i.showError(e.getElement()),(null===(n=this.loginButton)||void 0===n?void 0:n.getElement()).disabled=!0,setTimeout((()=>{this.closeErrorMessage(s,i)}),5e3)}else{const e=new o(u);e.showError(t.getElement()),(null===(s=this.loginButton)||void 0===s?void 0:s.getElement()).disabled=!0,setTimeout((()=>{this.closeErrorMessage(e)}),5e3)}}onHandleSubmit(t){var e,s,n,i;t.preventDefault();const r=(null===(e=this.firstNameInput)||void 0===e?void 0:e.getElement()).value,a=(null===(s=this.surnameInput)||void 0===s?void 0:s.getElement()).value,l=this.validate(r,this.minimumLengthName),o=this.validate(a,this.minimumLengthSurname);this.firstNameInput&&!l&&o?this.showErrorMessage(this.firstNameInput):this.surnameInput&&!o&&l?this.showErrorMessage(this.surnameInput):!this.surnameInput||!this.firstNameInput||o||l?((null===(n=this.firstNameInput)||void 0===n?void 0:n.getElement()).value="",(null===(i=this.surnameInput)||void 0===i?void 0:i.getElement()).value="",this.saveUserDataToLocalStorage({firstName:r,lastName:a}),this.router.navigate("/start")):this.showErrorMessage(this.firstNameInput,this.surnameInput)}saveUserDataToLocalStorage({firstName:t,lastName:e}){m.q.saveUserData({firstName:t,lastName:e}),this.headerInstance.updateWrapperHeader()}}class d extends n.S{constructor(){super({tag:"h1",classNames:["login__title"],callback:null,textContent:"Login"})}}class c extends n.S{constructor(t,e){super({tag:"div",classNames:["login"],callback:null}),this.router=t,this.setupLoginContent(e)}setupLoginContent(t){[(new d).getElement(),new h(this.router,t,3,4).getElement()].forEach((t=>this.viewHtmlElementCreator.addInnerElement(t)))}}}}]);